#include<stdio.h>
#include<math.h>

void main(){
	int i, j, k, n;
	float x[100], y[100], S, s[100], MSE_ma, MSE_ex, a;
	FILE *p, *q;
	clrscr();
	p=fopen("C:/Data/cwork/in6.txt","r");
	q=fopen("C:/Data/cwork/out6.txt","w");
	fscanf(p, "%d%d%f", &n, &k, &a);
	for(i=0; i<n; i++)
		fscanf(p, "%f", &x[i]);
	for(i=0; i<(n-k+1);i++){
		S=0.0;
		for(j=i; j<(i+k); j++)
			S+=x[j];
		y[i]=S/(float)k;
	}
	S=0.0;
	fprintf(q, "SE(Moving Average)\n");
	for(i=0; i<(n-k); i++){
		S+=pow((x[i+k]-y[i]), 2);
		fprintf(q, "%f\t", pow((x[i+k]-y[i]), 2));
	}
	MSE_ma = S/(float)(n-k);
	s[0]=x[0];
	S=0.0;
	fprintf(q, "\nSE(Exponential Smoothing)\n");
	for(i=1;i<(n-1);i++){
		s[i]=(a*x[i])+(1-a)*s[i-1];
		fprintf(q, "%f\t", pow((x[i+1]-s[i]), 2));
		S+=pow((x[i+1]-s[i]), 2);
	}
	MSE_ex=S/(float)(n-k);
	fprintf(q, "\nMSE for Moving Average=%f\n", MSE_ma);
	fprintf(q, "\nMSE for Exponential Smoothing=%f\n", MSE_ex);
	fclose(p);
	fclose(q);
}





















/*------------INPUT-----------
64 3 0.8
239.3	239.8	236.1	232	224.75	237.45	245.4	251.58	250.7	248.95	216	200.6
179.65	163.95	153.63	160.1	145.65	146.75	146.35	122	124.5	132.2	134.3	125.9
132.55	143.95	139.35	143.4	157.65	152.85	137.95	135.4	140.55	138.15	132.95	125.25
133.05	125.55	119.25	124.65	115.35	106.51	105.1	111.89	102.8	98.95	98.59	99.83
88.38	84.77	98.18	102.91	106.49	109.88	111.45	115.98	123.97	114.3	121.44	129.92
133.39	139.95	135.72	115.2	115.2
-------------OUTPUT------------
SE(Moving Average)
40.960117	125.813794	42.250000	195.999573	246.909318	34.692093	
0.076548	1184.047302	1440.202268	1780.842318	1211.040212	771.173137	
31.847126	184.326115	40.661834	20.100177	588.062500	192.284501	
1.562500	65.071095	19.654386	3.062500	169.867566	27.213537	
22.880200	237.673768	36.602537	178.222663	198.340564	2.300265	
0.033611	25.840381	143.201306	0.871141	23.684464	75.689814	
1.690008	60.840048	175.297543	108.229391	8.429357	25.334439	
58.471407	35.481949	0.080277	115.419181	117.288940	51.648312	
155.417981	125.514796	54.071499	25.233851	44.979356	133.017766	
8.027749	11.267210	100.333377	132.326694	136.889929	1.690008	
447.463606	
SE(Exponential Smoothing)
12.959934	23.232471	67.469870	122.261449	103.254822	67.441798	
0.581332	2.552018	1106.859679	486.374242	643.169876	431.482455	
209.509016	12.781476	188.649823	2.712569	0.532003	600.048143	
5.756053	52.130731	12.560197	59.154561	26.130121	154.314730	
4.475443	13.154236	224.261776	3.257723	232.897704	31.384683	
16.237447	2.541158	30.457309	77.506132	36.472580	39.591086	
57.129917	15.118980	72.630260	111.185723	12.382643	37.042071	
61.980182	29.425774	2.087760	0.904452	126.783009	34.362591	
149.759095	51.516914	25.155270	19.299301	5.995720	25.197685	
80.890997	61.955918	30.977659	92.028475	29.037291	58.334856	
7.303256	443.544707	
MSE for Moving Average=188.483704
MSE for Exponential Smoothing=110.593254
---------------------*/